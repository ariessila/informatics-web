!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.PhotoSwipeUI_Default=t()}(this,function(){"use strict";var e=function(e,t){var n=this,o=!1,l=!0,r,i,s,a,u,c,p,d=!0,m,f,h,w,v,g,b,_,T={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / "},C,I,E=function(e){if(C)return!0;e=e||window.event,_.timeToIdle&&_.mouseUsed&&!f&&D();for(var n=e.target||e.srcElement,o,l=n.className,r,i=0;i<H.length;i++)o=H[i],o.onTap&&l.indexOf("pswp__"+o.name)>-1&&(o.onTap(),r=!0);if(r){e.stopPropagation&&e.stopPropagation(),C=!0;var s=t.features.isOldAndroid?600:30;I=setTimeout(function(){C=!1},s)}},F=function(){return!e.likelyTouchDevice||_.mouseUsed||screen.width>1200},x=function(e,n,o){t[(o?"add":"remove")+"Class"](e,"pswp__"+n)},S=function(){var e=1===_.getNumItemsFn();e!==b&&(x(i,"ui--one-slide",e),b=e)},k=function(){x(p,"share-modal--hidden",d)},K=function(){return d=!d,d?(t.removeClass(p,"pswp__share-modal--fade-in"),setTimeout(function(){d&&k()},300)):(k(),setTimeout(function(){d||t.addClass(p,"pswp__share-modal--fade-in")},30)),d||O(),!1},L=function(t){t=t||window.event;var n=t.target||t.srcElement;return e.shout("shareLinkClick",t,n),n.href?n.hasAttribute("download")?!0:(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),d||K(),!1):!1},O=function(){for(var e="",t,n,o,l,r,i=0;i<_.shareButtons.length;i++)t=_.shareButtons[i],o=_.getImageURLForShare(t),l=_.getPageURLForShare(t),r=_.getTextForShare(t),n=t.url.replace("{{url}}",encodeURIComponent(l)).replace("{{image_url}}",encodeURIComponent(o)).replace("{{raw_image_url}}",o).replace("{{text}}",encodeURIComponent(r)),e+='<a href="'+n+'" target="_blank" class="pswp__share--'+t.id+'"'+(t.download?"download":"")+">"+t.label+"</a>",_.parseShareButtonOut&&(e=_.parseShareButtonOut(t,e));p.children[0].innerHTML=e,p.children[0].onclick=L},R=function(e){for(var n=0;n<_.closeElClasses.length;n++)if(t.hasClass(e,"pswp__"+_.closeElClasses[n]))return!0},y,z,M=0,D=function(){clearTimeout(z),M=0,f&&n.setIdle(!1)},N=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(z),z=setTimeout(function(){n.setIdle(!0)},_.timeToIdleOutside))},P=function(){_.fullscreenEl&&(r||(r=n.getFullscreenAPI()),r?(t.bind(document,r.eventK,n.updateFullscreen),n.updateFullscreen(),t.addClass(e.template,"pswp--supports-fs")):t.removeClass(e.template,"pswp--supports-fs"))},U=function(){_.preloaderEl&&(Z(!0),h("beforeChange",function(){clearTimeout(g),g=setTimeout(function(){e.currItem&&e.currItem.loading?(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth)&&Z(!1):Z(!0)},_.loadingIndicatorDelay)}),h("imageLoadComplete",function(t,n){e.currItem===n&&Z(!0)}))},Z=function(e){v!==e&&(x(w,"preloader--active",!e),v=e)},A=function(e){var n=e.vGap;if(F()){var o=_.barsSize;if(_.captionEl&&"auto"===o.bottom)if(a||(a=t.createEl("pswp__caption pswp__caption--fake"),a.appendChild(t.createEl("pswp__caption__center")),i.insertBefore(a,s),t.addClass(i,"pswp__ui--fit")),_.addCaptionHTMLFn(e,a,!0)){var l=a.clientHeight;n.bottom=parseInt(l,10)||44}else n.bottom=o.top;else n.bottom="auto"===o.bottom?0:o.bottom;n.top=o.top}else n.top=n.bottom=0},q=function(){_.timeToIdle&&h("mouseUsed",function(){t.bind(document,"mousemove",D),t.bind(document,"mouseout",N),y=setInterval(function(){M++,2===M&&n.setIdle(!0)},_.timeToIdle/2)})},B=function(){h("onVerticalDrag",function(e){l&&.95>e?n.hideControls():!l&&e>=.95&&n.showControls()});var e;h("onPinchClose",function(t){l&&.9>t?(n.hideControls(),e=!0):e&&!l&&t>.9&&n.showControls()}),h("zoomGestureEnded",function(){e=!1,e&&!l&&n.showControls()})},H=[{name:"caption",option:"captionEl",onInit:function(e){s=e}},{name:"share-modal",option:"shareEl",onInit:function(e){p=e},onTap:function(){K()}},{name:"button--share",option:"shareEl",onInit:function(e){c=e},onTap:function(){K()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){u=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){r.isFullscreen()?r.exit():r.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){w=e}}],W=function(){var e,n,o,l=function(l){if(l)for(var r=l.length,i=0;r>i;i++){e=l[i],n=e.className;for(var s=0;s<H.length;s++)o=H[s],n.indexOf("pswp__"+o.name)>-1&&(_[o.option]?(t.removeClass(e,"pswp__element--disabled"),o.onInit&&o.onInit(e)):t.addClass(e,"pswp__element--disabled"))}};l(i.children);var r=t.getChildByClass(i,"pswp__top-bar");r&&l(r.children)};n.init=function(){t.extend(e.options,T,!0),_=e.options,i=t.getChildByClass(e.scrollWrap,"pswp__ui"),h=e.listen,B(),h("beforeChange",n.update),h("doubleTap",function(t){var n=e.currItem.initialZoomLevel;e.getZoomLevel()!==n?e.zoomTo(n,t,333):e.zoomTo(_.getDoubleTapZoom(!1,e.currItem),t,333)}),h("preventDragEvent",function(e,t,n){var o=e.target||e.srcElement;o&&o.className&&e.type.indexOf("mouse")>-1&&(o.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(o.tagName))&&(n.prevent=!1)}),h("bindEvents",function(){t.bind(i,"pswpTap click",E),t.bind(e.scrollWrap,"pswpTap",n.onGlobalTap),e.likelyTouchDevice||t.bind(e.scrollWrap,"mouseover",n.onMouseOver)}),h("unbindEvents",function(){d||K(),y&&clearInterval(y),t.unbind(document,"mouseout",N),t.unbind(document,"mousemove",D),t.unbind(i,"pswpTap click",E),t.unbind(e.scrollWrap,"pswpTap",n.onGlobalTap),t.unbind(e.scrollWrap,"mouseover",n.onMouseOver),r&&(t.unbind(document,r.eventK,n.updateFullscreen),r.isFullscreen()&&(_.hideAnimationDuration=0,r.exit()),r=null)}),h("destroy",function(){_.captionEl&&(a&&i.removeChild(a),t.removeClass(s,"pswp__caption--empty")),p&&(p.children[0].onclick=null),t.removeClass(i,"pswp__ui--over-close"),t.addClass(i,"pswp__ui--hidden"),n.setIdle(!1)}),_.showAnimationDuration||t.removeClass(i,"pswp__ui--hidden"),h("initialZoomIn",function(){_.showAnimationDuration&&t.removeClass(i,"pswp__ui--hidden")}),h("initialZoomOut",function(){t.addClass(i,"pswp__ui--hidden")}),h("parseVerticalMargin",A),W(),_.shareEl&&c&&p&&(d=!0),S(),q(),P(),U()},n.setIdle=function(e){f=e,x(i,"ui--idle",e)},n.update=function(){l&&e.currItem?(n.updateIndexIndicator(),_.captionEl&&(_.addCaptionHTMLFn(e.currItem,s),x(s,"caption--empty",!e.currItem.title)),o=!0):o=!1,d||K(),S()},n.updateFullscreen=function(n){n&&setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50),t[(r.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")},n.updateIndexIndicator=function(){_.counterEl&&(u.innerHTML=e.getCurrentIndex()+1+_.indexIndicatorSep+_.getNumItemsFn())},n.onGlobalTap=function(o){o=o||window.event;var r=o.target||o.srcElement;if(!C)if(o.detail&&"mouse"===o.detail.pointerType){if(R(r))return void e.close();t.hasClass(r,"pswp__img")&&(1===e.getZoomLevel()&&e.getZoomLevel()<=e.currItem.fitRatio?_.clickToCloseNonZoomable&&e.close():e.toggleDesktopZoom(o.detail.releasePoint))}else if(_.tapToToggleControls&&(l?n.hideControls():n.showControls()),_.tapToClose&&(t.hasClass(r,"pswp__img")||R(r)))return void e.close()},n.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;x(i,"ui--over-close",R(t))},n.hideControls=function(){t.addClass(i,"pswp__ui--hidden"),l=!1},n.showControls=function(){l=!0,o||n.update(),t.removeClass(i,"pswp__ui--hidden")},n.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},n.getFullscreenAPI=function(){var t=document.documentElement,n,o="fullscreenchange";return t.requestFullscreen?n={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:o}:t.mozRequestFullScreen?n={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+o}:t.webkitRequestFullscreen?n={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+o}:t.msRequestFullscreen&&(n={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),n&&(n.enter=function(){return m=_.closeOnScroll,_.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?e.template[this.enterK]():void e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},n.exit=function(){return _.closeOnScroll=m,document[this.exitK]()},n.isFullscreen=function(){return document[this.elementK]}),n}};return e});